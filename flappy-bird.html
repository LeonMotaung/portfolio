<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Flappy Bird Clone</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css"></link>
    <link href="https://unpkg.com/nes.css/css/nes.min.css" rel="stylesheet" />
    <style>
        body {
            font-family: 'Arial', sans-serif;
            margin: 0;
            overflow: hidden;
        }
        canvas {
            display: block;
            background-color: #70c5ce;
        }
    </style>
</head>
<body class="bg-blue-200 flex flex-col items-center justify-center min-h-screen">
    <div class="text-center mb-4">
        <h1 class="text-4xl font-bold mb-2 nes-text is-primary">Flappy Bird Clone</h1>
        <p class="text-lg nes-text">Navigate the bird through the walls without touching them!</p>
    </div>
    <canvas id="gameCanvas"></canvas>
    <script>
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');

        function resizeCanvas() {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
        }

        window.addEventListener('resize', resizeCanvas);
        resizeCanvas();

        const bird = {
            x: 50,
            y: 150,
            width: 20,
            height: 20,
            gravity: 0.6,
            lift: -15,
            velocity: 0,
            show: function() {
                ctx.fillStyle = 'yellow';
                ctx.fillRect(this.x, this.y, this.width, this.height);
            },
            up: function() {
                this.velocity += this.lift;
            },
            update: function() {
                this.velocity += this.gravity;
                this.y += this.velocity;

                if (this.y > canvas.height - this.height) {
                    this.y = canvas.height - this.height;
                    this.velocity = 0;
                }

                if (this.y < 0) {
                    this.y = 0;
                    this.velocity = 0;
                }
            },
            reset: function() {
                this.x = 50;
                this.y = 150;
                this.velocity = 0;
            }
        };

        const walls = [];
        const wallWidth = 20;
        const wallGap = 150; // Increased gap to make it easier
        let frameCount = 0;

        function Wall() {
            this.top = Math.random() * (canvas.height / 2);
            this.bottom = canvas.height - (this.top + wallGap);
            this.x = canvas.width;
            this.width = wallWidth;
            this.speed = 2;

            this.show = function() {
                ctx.fillStyle = 'brown';
                ctx.fillRect(this.x, 0, this.width, this.top);
                ctx.fillRect(this.x, canvas.height - this.bottom, this.width, this.bottom);
            };

            this.update = function() {
                this.x -= this.speed;
            };

            this.offscreen = function() {
                return this.x < -this.width;
            };

            this.hits = function(bird) {
                if (bird.y < this.top || bird.y > canvas.height - this.bottom) {
                    if (bird.x > this.x && bird.x < this.x + this.width) {
                        return true;
                    }
                }
                return false;
            };
        }

        function draw() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            bird.show();
            bird.update();

            if (frameCount % 100 === 0) { // Increased interval to make it easier
                walls.push(new Wall());
            }

            for (let i = walls.length - 1; i >= 0; i--) {
                walls[i].show();
                walls[i].update();

                if (walls[i].hits(bird)) {
                    console.log('HIT');
                    bird.reset();
                    walls.length = 0; // Clear all walls
                    frameCount = 0; // Reset frame count
                    break;
                }

                if (walls[i].offscreen()) {
                    walls.splice(i, 1);
                }
            }

            frameCount++;
            requestAnimationFrame(draw);
        }

        document.addEventListener('keydown', function(event) {
            if (event.code === 'Space') {
                bird.up();
            }
        });

        document.addEventListener('click', function() {
            bird.up();
        });

        draw();
    </script>
</body>
</html>
